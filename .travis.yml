language: python

# Source: scikit-learn .travis.yml file
matrix:
  include:
    # This environment tests that scikit-learn can be built against
    # versions of numpy, scipy with ATLAS that comes with Ubuntu Trusty 14.04
    - env: DISTRIB="ubuntu" PYTHON_VERSION="2.7" CYTHON_VERSION="0.23.4"
           COVERAGE=true
      addons:
        apt:
          packages:
            # these only required by the DISTRIB="ubuntu" builds:
            - python-scipy
            - libatlas3gf-base
            - libatlas-dev
    # This environment tests the oldest supported anaconda env
    - env: DISTRIB="conda" PYTHON_VERSION="2.7" INSTALL_MKL="false"
           NUMPY_VERSION="1.8.2" SCIPY_VERSION="0.13.3" CYTHON_VERSION="0.23.5"
           COVERAGE=true
    # flake8 linting on diff wrt common ancestor with upstream/master
    - env: RUN_FLAKE8="true" SKIP_TESTS="true"
           DISTRIB="conda" PYTHON_VERSION="3.5" INSTALL_MKL="true"
           NUMPY_VERSION="1.12.1" SCIPY_VERSION="0.19.0" CYTHON_VERSION="0.23.5"
    # This environment tests scikit-learn against numpy and scipy master
    # installed from their CI wheels in a virtualenv with the Python
    # interpreter provided by travis.
    -  python: 3.5
       env: DISTRIB="scipy-dev-wheels"
script: bash build_tools/travis/test_script.sh
